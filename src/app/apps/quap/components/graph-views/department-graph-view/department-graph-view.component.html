
<div *ngIf="aspects.length === 0" class="graph-container">
  <span>{{'quap.unavailable' | translate}}</span>
</div>

<div *ngIf="aspects.length > 0" class="graph-container">
  <svg width="1760" viewBox="0 0 3520 1760" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xhtml="http://www.w3.org/1999/xhtml">
    <style>
      * {
        font-family: "Nunito", sans-serif;
      }

      div.text {
        display: flex;
        justify-content: center;
        align-items: center;

        height: 100%;

        text-align: center;
        font-size: 26px;
      }
    </style>

    <g id="graph" clip-path="url(#clip0)">
      <rect x="41.5" y="561.5" width="764" height="317" rx="28.5" fill="white" stroke="black" stroke-width="6"/>
      <foreignObject *ngFor="let aspect of aspects" [attr.x]="aspectMapping[aspect.id].x" [attr.y]="aspectMapping[aspect.id].y" width="320" height="160" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" (click)="onAspectClick(aspect)">
        <xhtml:div xmlns="http://www.w3.org/1999/xhtml">
          <app-summary-view [text]="aspect.name" [values$]="getData(aspect.id)" [clickable]="isClickable(aspect)"></app-summary-view>
        </xhtml:div>
      </foreignObject>
      <foreignObject x="80" y="800" width="680" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
        <xhtml:div xmlns="http://www.w3.org/1999/xhtml" class="text">
          <span>{{'quap.graph.program-design' | translate}}</span>
        </xhtml:div>
      </foreignObject>
      <foreignObject x="3030" y="1050" width="450" height="670" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
        <xhtml:div xmlns="http://www.w3.org/1999/xhtml">
          <app-legend />
        </xhtml:div>
      </foreignObject>
      <path d="M424 220L428.5 220L428.5 220L424 220ZM484 160L484 164.5L484 160ZM1064 160L1019 134.019L1019 185.981L1064 160ZM428.5 240L428.5 220L419.5 220L419.5 240L428.5 240ZM484 164.5L1023.5 164.5L1023.5 155.5L484 155.5L484 164.5ZM428.5 220C428.5 189.348 453.348 164.5 484 164.5L484 155.5C448.378 155.5 419.5 184.378 419.5 220L428.5 220Z" fill="black"/>
      <path d="M2024 160L1979 134.019L1979 185.981L2024 160ZM1384 164.5L1983.5 164.5L1983.5 155.5L1384 155.5L1384 164.5Z" fill="black"/>
      <path d="M2604 160L2604 155.5H2604L2604 160ZM2664 220L2668.5 220L2668.5 220L2664 220ZM2664 400L2689.98 355L2638.02 355L2664 400ZM2344 164.5L2604 164.5L2604 155.5L2344 155.5L2344 164.5ZM2659.5 220L2659.5 359.5L2668.5 359.5L2668.5 220L2659.5 220ZM2604 164.5C2634.65 164.5 2659.5 189.348 2659.5 220L2668.5 220C2668.5 184.378 2639.62 155.5 2604 155.5L2604 164.5Z" fill="black"/>
      <path d="M2664 720L2689.98 675H2638.02L2664 720ZM2659.5 560V679.5H2668.5V560H2659.5Z" fill="black"/>
      <path d="M2484 480L2484 484.5L2484 484.5L2484 480ZM2504 480L2459 454.019L2459 505.981L2504 480ZM2364 640L2364 644.5H2364L2364 640ZM2424 580L2419.5 580V580H2424ZM2424 540L2428.5 540L2428.5 540L2424 540ZM2344 644.5L2364 644.5L2364 635.5L2344 635.5L2344 644.5ZM2428.5 580L2428.5 540L2419.5 540L2419.5 580L2428.5 580ZM2364 644.5C2399.62 644.5 2428.5 615.622 2428.5 580H2419.5C2419.5 610.652 2394.65 635.5 2364 635.5L2364 644.5ZM2484 475.5C2448.38 475.5 2419.5 504.378 2419.5 540L2428.5 540C2428.5 509.348 2453.35 484.5 2484 484.5L2484 475.5Z" fill="black"/>
      <path d="M2664 1060L2659.5 1060L2659.5 1060L2664 1060ZM2604 1120L2604 1124.5L2604 1124.5L2604 1120ZM2344 1120L2389 1145.98L2389 1094.02L2344 1120ZM2659.5 880L2659.5 1060L2668.5 1060L2668.5 880L2659.5 880ZM2604 1115.5L2384.5 1115.5L2384.5 1124.5L2604 1124.5L2604 1115.5ZM2659.5 1060C2659.5 1090.65 2634.65 1115.5 2604 1115.5L2604 1124.5C2639.62 1124.5 2668.5 1095.62 2668.5 1060L2659.5 1060Z" fill="black"/>
      <path d="M2664 1660L2668.5 1660V1660L2664 1660ZM2604 1720L2604 1715.5H2604L2604 1720ZM484.001 1720L484.001 1724.5H484.001L484.001 1720ZM424.001 1660L419.501 1660L419.501 1660L424.001 1660ZM424.001 1520L398.021 1565L449.982 1565L424.001 1520ZM2659.5 880L2659.5 1660L2668.5 1660L2668.5 880L2659.5 880ZM2604 1715.5L484.001 1715.5L484.001 1724.5L2604 1724.5L2604 1715.5ZM428.501 1660L428.501 1560.5L419.501 1560.5L419.501 1660L428.501 1660ZM484.001 1715.5C453.35 1715.5 428.502 1690.65 428.501 1660L419.501 1660C419.502 1695.62 448.379 1724.5 484.001 1724.5L484.001 1715.5ZM2659.5 1660C2659.5 1690.65 2634.65 1715.5 2604 1715.5L2604 1724.5C2639.62 1724.5 2668.5 1695.62 2668.5 1660L2659.5 1660Z" fill="black"/>
      <path d="M2184 1200L2158.02 1245L2209.98 1245L2184 1200ZM2188.5 1520L2188.5 1240.5L2179.5 1240.5L2179.5 1520L2188.5 1520Z" fill="black"/>
      <path d="M1704 1600L1749 1625.98V1574.02L1704 1600ZM2024 1595.5H1744.5V1604.5H2024V1595.5Z" fill="black"/>
      <path d="M2004 1120L2004 1124.5L2004 1124.5L2004 1120ZM1944 1180L1948.5 1180L1948.5 1180L1944 1180ZM1944 1220L1948.5 1220L1944 1220ZM1884 1280L1884 1275.5L1884 1275.5L1884 1280ZM1704 1280L1749 1305.98L1749 1254.02L1704 1280ZM2024 1115.5L2004 1115.5L2004 1124.5L2024 1124.5L2024 1115.5ZM1939.5 1180L1939.5 1220L1948.5 1220L1948.5 1180L1939.5 1180ZM1884 1275.5L1744.5 1275.5L1744.5 1284.5L1884 1284.5L1884 1275.5ZM1939.5 1220C1939.5 1250.65 1914.65 1275.5 1884 1275.5L1884 1284.5C1919.62 1284.5 1948.5 1255.62 1948.5 1220L1939.5 1220ZM2004 1115.5C1968.38 1115.5 1939.5 1144.38 1939.5 1180L1948.5 1180C1948.5 1149.35 1973.35 1124.5 2004 1124.5L2004 1115.5Z" fill="black"/>
      <path d="M1604 1120L1604 1115.5H1604L1604 1120ZM1544 1060L1548.5 1060L1548.5 1060L1544 1060ZM1544 960L1518.02 1005L1569.98 1005L1544 960ZM2024 1115.5L1604 1115.5L1604 1124.5L2024 1124.5L2024 1115.5ZM1548.5 1060L1548.5 1000.5L1539.5 1000.5L1539.5 1060L1548.5 1060ZM1604 1115.5C1573.35 1115.5 1548.5 1090.65 1548.5 1060L1539.5 1060C1539.5 1095.62 1568.38 1124.5 1604 1124.5L1604 1115.5Z" fill="black"/>
      <path d="M424 400L398.019 445H449.981L424 400ZM428.5 560V440.5H419.5V560H428.5Z" fill="black"/>
      <path d="M424 880L398.019 925L449.981 925L424 880ZM428.5 1040L428.5 920.5L419.5 920.5L419.5 1040L428.5 1040Z" fill="black"/>
      <path d="M1164 720.14L1164 724.64L1164 724.64L1164 720.14ZM807.002 720.14L852.002 746.121L852.002 694.159L807.002 720.14ZM1284 880L1284 875.5L1284 880ZM1224 820L1228.5 820L1228.5 820L1224 820ZM1224 780.14L1219.5 780.14L1219.5 780.14L1224 780.14ZM1164 715.64L847.502 715.64L847.502 724.64L1164 724.64L1164 715.64ZM1384 875.5L1284 875.5L1284 884.5L1384 884.5L1384 875.5ZM1228.5 820L1228.5 780.14L1219.5 780.14L1219.5 820L1228.5 820ZM1284 875.5C1253.35 875.5 1228.5 850.652 1228.5 820L1219.5 820C1219.5 855.622 1248.38 884.5 1284 884.5L1284 875.5ZM1164 724.64C1194.65 724.64 1219.5 749.488 1219.5 780.14L1228.5 780.14C1228.5 744.518 1199.62 715.64 1164 715.64L1164 724.64Z" fill="black"/>
      <path d="M904 1040L929.981 995L878.019 995L904 1040ZM484 960L484 964.5L484 960ZM844 960L844 955.5L844 960ZM428.5 1040L428.5 1020L419.5 1020L419.5 1040L428.5 1040ZM484 964.5L844 964.5L844 955.5L484 955.5L484 964.5ZM428.5 1020C428.5 989.348 453.348 964.5 484 964.5V955.5C448.378 955.5 419.5 984.378 419.5 1020L428.5 1020ZM908.5 1020C908.5 984.378 879.622 955.5 844 955.5L844 964.5C874.652 964.5 899.5 989.348 899.5 1020L908.5 1020Z" fill="black"/>
      <path d="M424 1200L398.019 1245L449.981 1245L424 1200ZM899.5 1200L899.5 1220L908.5 1220L908.5 1200L899.5 1200ZM844 1275.5L484 1275.5L484 1284.5L844 1284.5L844 1275.5ZM484 1275.5C453.348 1275.5 428.5 1250.65 428.5 1220L419.5 1220C419.5 1255.62 448.378 1284.5 484 1284.5L484 1275.5ZM899.5 1220C899.5 1250.65 874.652 1275.5 844 1275.5L844 1284.5C879.622 1284.5 908.5 1255.62 908.5 1220L899.5 1220Z" fill="black"/>
      <path d="M424 1200L398.019 1245L449.981 1245L424 1200ZM428.5 1360L428.5 1240.5L419.5 1240.5L419.5 1360L428.5 1360Z" fill="black"/>
      <path d="M244 1120L244 1124.5H244L244 1120ZM184 1180L188.5 1180V1180L184 1180ZM184 1380L179.5 1380V1380L184 1380ZM264 1440L219 1414.02L219 1465.98L264 1440ZM264 1115.5L244 1115.5L244 1124.5L264 1124.5L264 1115.5ZM179.5 1180L179.5 1380L188.5 1380L188.5 1180L179.5 1180ZM179.5 1380C179.5 1415.62 208.378 1444.5 244 1444.5L244 1435.5C213.348 1435.5 188.5 1410.65 188.5 1380L179.5 1380ZM244 1115.5C208.378 1115.5 179.5 1144.38 179.5 1180L188.5 1180C188.5 1149.35 213.348 1124.5 244 1124.5L244 1115.5Z" fill="black"/>
      <path d="M484 1600L484 1595.5L484 1600ZM424 1540L428.5 1540L428.5 1540L424 1540ZM424 1520L398.019 1565L449.981 1565L424 1520ZM1384 1595.5L484 1595.5L484 1604.5L1384 1604.5L1384 1595.5ZM484 1595.5C453.348 1595.5 428.5 1570.65 428.5 1540L419.5 1540C419.5 1575.62 448.378 1604.5 484 1604.5L484 1595.5Z" fill="black"/>
      <path d="M1284 1280L1284 1275.5H1284L1284 1280ZM1224 1340L1219.5 1340L1219.5 1340L1224 1340ZM1224 1380L1228.5 1380L1228.5 1380L1224 1380ZM1164 1440L1164 1444.5L1164 1440ZM584 1440L629 1465.98L629 1414.02L584 1440ZM1384 1275.5L1284 1275.5L1284 1284.5L1384 1284.5L1384 1275.5ZM1219.5 1340L1219.5 1380L1228.5 1380L1228.5 1340L1219.5 1340ZM1164 1435.5L624.5 1435.5L624.5 1444.5L1164 1444.5L1164 1435.5ZM1219.5 1380C1219.5 1410.65 1194.65 1435.5 1164 1435.5L1164 1444.5C1199.62 1444.5 1228.5 1415.62 1228.5 1380L1219.5 1380ZM1284 1275.5C1248.38 1275.5 1219.5 1304.38 1219.5 1340L1228.5 1340C1228.5 1309.35 1253.35 1284.5 1284 1284.5L1284 1275.5Z" fill="black"/>
      <path d="M1544 540L1548.5 540V540L1544 540ZM1604 480L1604 484.5L1604 480ZM2504 480L2459 454.019L2459 505.981L2504 480ZM1548.5 800L1548.5 540L1539.5 540L1539.5 800L1548.5 800ZM1604 484.5L2463.5 484.5L2463.5 475.5L1604 475.5L1604 484.5ZM1548.5 540C1548.5 509.348 1573.35 484.5 1604 484.5L1604 475.5C1568.38 475.5 1539.5 504.378 1539.5 540L1548.5 540Z" fill="black"/>
      <path d="M1544 700L1548.5 700L1544 700ZM1604 640L1604 635.5L1604 640ZM2024 640L1979 614.019L1979 665.981L2024 640ZM1548.5 800L1548.5 700L1539.5 700L1539.5 800L1548.5 800ZM1604 644.5L1983.5 644.5L1983.5 635.5L1604 635.5L1604 644.5ZM1548.5 700C1548.5 669.348 1573.35 644.5 1604 644.5L1604 635.5C1568.38 635.5 1539.5 664.378 1539.5 700L1548.5 700Z" fill="black"/>
      <path d="M1944 1060L1948.5 1060L1944 1060ZM1944 701L1939.5 701V701L1944 701ZM2024 641L1979 615.019L1979 666.981L2024 641ZM2024 1115.5L2004 1115.5L2004 1124.5L2024 1124.5L2024 1115.5ZM1948.5 1060L1948.5 701L1939.5 701L1939.5 1060L1948.5 1060ZM1948.5 701C1948.5 670.348 1973.35 645.5 2004 645.5L2004 636.5C1968.38 636.5 1939.5 665.378 1939.5 701L1948.5 701ZM2004 1115.5C1973.35 1115.5 1948.5 1090.65 1948.5 1060L1939.5 1060C1939.5 1095.62 1968.38 1124.5 2004 1124.5L2004 1115.5Z" fill="black"/>
    </g>
    <defs>
      <clipPath id="clip0">
        <rect width="3520" height="1760" fill="white"/>
      </clipPath>
      <clipPath id="clip1">
        <rect width="320" height="160" fill="white"/>
      </clipPath>
    </defs>
  </svg>
</div>
