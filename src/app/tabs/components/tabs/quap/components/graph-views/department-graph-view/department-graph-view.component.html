
<div *ngIf="aspects.length === 0" class="graph-container">
  <span>{{'quap.unavailable' | translate}}</span>
</div>

<div *ngIf="aspects.length > 0" class="graph-container">
  <svg width="1760" viewBox="0 0 3520 1760" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xhtml="http://www.w3.org/1999/xhtml">
    <style>
      * {
        font-family: "Nunito", sans-serif;
      }

      div.text {
        display: flex;
        justify-content: center;
        align-items: center;

        height: 100%;

        text-align: center;
        font-size: 26px;
      }
    </style>

    <g id="graph" clip-path="url(#clip0)">
      <rect x="41.5" y="561.5" width="764" height="317" rx="28.5" fill="white" stroke="black" stroke-width="3"/>
      <foreignObject *ngFor="let aspect of aspects; let i = index" [attr.x]="aspectMapping[aspect.id].x" [attr.y]="aspectMapping[aspect.id].y" width="320" height="160" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" (click)="onAspectClick(i)">
        <xhtml:div xmlns="http://www.w3.org/1999/xhtml">
          <app-summary-view [text]="aspect.name" [values$]="getData(aspect.id)" [clickable]="isClickable(aspect)"></app-summary-view>
        </xhtml:div>
      </foreignObject>
      <foreignObject x="80" y="800" width="680" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
        <xhtml:div xmlns="http://www.w3.org/1999/xhtml" class="text">
          <span>{{'quap.graph.program-design' | translate}}</span>
        </xhtml:div>
      </foreignObject>
      <foreignObject x="3030" y="1050" width="450" height="670" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
        <xhtml:div xmlns="http://www.w3.org/1999/xhtml">
          <app-legend />
        </xhtml:div>
      </foreignObject>
      <path d="M424 220L425.5 220L424 220ZM484 160L484 161.5L484 160ZM1065.06 161.061C1065.65 160.475 1065.65 159.525 1065.06 158.939L1055.51 149.393C1054.93 148.808 1053.98 148.808 1053.39 149.393C1052.81 149.979 1052.81 150.929 1053.39 151.515L1061.88 160L1053.39 168.485C1052.81 169.071 1052.81 170.021 1053.39 170.607C1053.98 171.192 1054.93 171.192 1055.51 170.607L1065.06 161.061ZM425.5 240L425.5 220L422.5 220L422.5 240L425.5 240ZM484 161.5L1064 161.5L1064 158.5L484 158.5L484 161.5ZM425.5 220C425.5 187.691 451.691 161.5 484 161.5L484 158.5C450.034 158.5 422.5 186.034 422.5 220L425.5 220Z" fill="black"/>
      <path d="M2025.06 161.061C2025.65 160.475 2025.65 159.525 2025.06 158.939L2015.51 149.393C2014.93 148.808 2013.98 148.808 2013.39 149.393C2012.81 149.979 2012.81 150.929 2013.39 151.515L2021.88 160L2013.39 168.485C2012.81 169.071 2012.81 170.021 2013.39 170.607C2013.98 171.192 2014.93 171.192 2015.51 170.607L2025.06 161.061ZM1384 161.5L2024 161.5L2024 158.5L1384 158.5L1384 161.5Z" fill="black"/>
      <path d="M2604 160L2604 158.5H2604L2604 160ZM2664 220L2665.5 220V220L2664 220ZM2662.94 401.061C2663.52 401.646 2664.47 401.646 2665.06 401.061L2674.61 391.515C2675.19 390.929 2675.19 389.979 2674.61 389.393C2674.02 388.808 2673.07 388.808 2672.48 389.393L2664 397.879L2655.51 389.393C2654.93 388.808 2653.98 388.808 2653.39 389.393C2652.81 389.979 2652.81 390.929 2653.39 391.515L2662.94 401.061ZM2344 161.5L2604 161.5L2604 158.5L2344 158.5L2344 161.5ZM2662.5 220L2662.5 400L2665.5 400L2665.5 220L2662.5 220ZM2604 161.5C2636.31 161.5 2662.5 187.691 2662.5 220L2665.5 220C2665.5 186.035 2637.97 158.5 2604 158.5L2604 161.5Z" fill="black"/>
      <path d="M2662.94 721.061C2663.53 721.646 2664.47 721.646 2665.06 721.061L2674.61 711.515C2675.19 710.929 2675.19 709.979 2674.61 709.393C2674.02 708.808 2673.07 708.808 2672.49 709.393L2664 717.879L2655.51 709.393C2654.93 708.808 2653.98 708.808 2653.39 709.393C2652.81 709.979 2652.81 710.929 2653.39 711.515L2662.94 721.061ZM2662.5 560V720H2665.5V560H2662.5Z" fill="black"/>
      <path d="M2484 480L2484 481.5L2484 481.5L2484 480ZM2505.06 481.061C2505.65 480.475 2505.65 479.525 2505.06 478.939L2495.51 469.393C2494.93 468.808 2493.98 468.808 2493.39 469.393C2492.81 469.979 2492.81 470.929 2493.39 471.515L2501.88 480L2493.39 488.485C2492.81 489.071 2492.81 490.021 2493.39 490.607C2493.98 491.192 2494.93 491.192 2495.51 490.607L2505.06 481.061ZM2364 640L2364 641.5H2364L2364 640ZM2424 580L2422.5 580V580H2424ZM2424 540L2425.5 540V540L2424 540ZM2484 481.5L2504 481.5L2504 478.5L2484 478.5L2484 481.5ZM2344 641.5L2364 641.5L2364 638.5L2344 638.5L2344 641.5ZM2425.5 580L2425.5 540L2422.5 540L2422.5 580L2425.5 580ZM2364 641.5C2397.97 641.5 2425.5 613.966 2425.5 580H2422.5C2422.5 612.309 2396.31 638.5 2364 638.5L2364 641.5ZM2484 478.5C2450.03 478.5 2422.5 506.035 2422.5 540L2425.5 540C2425.5 507.691 2451.69 481.5 2484 481.5L2484 478.5Z" fill="black"/>
      <path d="M2664 1060L2662.5 1060L2662.5 1060L2664 1060ZM2604 1120L2604 1121.5H2604L2604 1120ZM2342.94 1118.94C2342.35 1119.53 2342.35 1120.47 2342.94 1121.06L2352.48 1130.61C2353.07 1131.19 2354.02 1131.19 2354.61 1130.61C2355.19 1130.02 2355.19 1129.07 2354.61 1128.49L2346.12 1120L2354.61 1111.51C2355.19 1110.93 2355.19 1109.98 2354.61 1109.39C2354.02 1108.81 2353.07 1108.81 2352.48 1109.39L2342.94 1118.94ZM2662.5 880L2662.5 1060L2665.5 1060L2665.5 880L2662.5 880ZM2604 1118.5L2344 1118.5L2344 1121.5L2604 1121.5L2604 1118.5ZM2662.5 1060C2662.5 1092.31 2636.31 1118.5 2604 1118.5L2604 1121.5C2637.97 1121.5 2665.5 1093.97 2665.5 1060L2662.5 1060Z" fill="black"/>
      <path d="M2664 1660L2665.5 1660V1660L2664 1660ZM2604 1720L2604 1718.5L2604 1720ZM484.001 1720L484.001 1721.5H484.001L484.001 1720ZM424.001 1660L422.501 1660L422.501 1660L424.001 1660ZM425.062 1518.94C424.476 1518.35 423.526 1518.35 422.941 1518.94L413.395 1528.49C412.809 1529.07 412.809 1530.02 413.395 1530.61C413.981 1531.19 414.93 1531.19 415.516 1530.61L424.001 1522.12L432.487 1530.61C433.072 1531.19 434.022 1531.19 434.608 1530.61C435.194 1530.02 435.194 1529.07 434.608 1528.49L425.062 1518.94ZM2662.5 880L2662.5 1660L2665.5 1660L2665.5 880L2662.5 880ZM2604 1718.5L484.001 1718.5L484.001 1721.5L2604 1721.5L2604 1718.5ZM425.501 1660L425.501 1520L422.501 1520L422.501 1660L425.501 1660ZM484.001 1718.5C451.693 1718.5 425.502 1692.31 425.501 1660L422.501 1660C422.502 1693.97 450.036 1721.5 484.001 1721.5L484.001 1718.5ZM2662.5 1660C2662.5 1692.31 2636.31 1718.5 2604 1718.5L2604 1721.5C2637.97 1721.5 2665.5 1693.97 2665.5 1660L2662.5 1660Z" fill="black"/>
      <path d="M2185.06 1198.94C2184.47 1198.35 2183.53 1198.35 2182.94 1198.94L2173.39 1208.49C2172.81 1209.07 2172.81 1210.02 2173.39 1210.61C2173.98 1211.19 2174.93 1211.19 2175.51 1210.61L2184 1202.12L2192.49 1210.61C2193.07 1211.19 2194.02 1211.19 2194.61 1210.61C2195.19 1210.02 2195.19 1209.07 2194.61 1208.49L2185.06 1198.94ZM2185.5 1520L2185.5 1200L2182.5 1200L2182.5 1520L2185.5 1520Z" fill="black"/>
      <path d="M1702.94 1598.94C1702.35 1599.53 1702.35 1600.47 1702.94 1601.06L1712.49 1610.61C1713.07 1611.19 1714.02 1611.19 1714.61 1610.61C1715.19 1610.02 1715.19 1609.07 1714.61 1608.49L1706.12 1600L1714.61 1591.51C1715.19 1590.93 1715.19 1589.98 1714.61 1589.39C1714.02 1588.81 1713.07 1588.81 1712.49 1589.39L1702.94 1598.94ZM2024 1598.5H1704V1601.5H2024V1598.5Z" fill="black"/>
      <path d="M2004 1120L2004 1121.5H2004L2004 1120ZM1944 1180L1945.5 1180L1945.5 1180L1944 1180ZM1944 1220L1945.5 1220L1944 1220ZM1884 1280L1884 1278.5H1884L1884 1280ZM1702.94 1278.94C1702.35 1279.53 1702.35 1280.48 1702.94 1281.06L1712.49 1290.61C1713.07 1291.19 1714.02 1291.19 1714.61 1290.61C1715.19 1290.02 1715.19 1289.07 1714.61 1288.49L1706.12 1280L1714.61 1271.51C1715.19 1270.93 1715.19 1269.98 1714.61 1269.39C1714.02 1268.81 1713.07 1268.81 1712.49 1269.39L1702.94 1278.94ZM2024 1118.5L2004 1118.5L2004 1121.5L2024 1121.5L2024 1118.5ZM1942.5 1180L1942.5 1220L1945.5 1220L1945.5 1180L1942.5 1180ZM1884 1278.5L1704 1278.5L1704 1281.5L1884 1281.5L1884 1278.5ZM1942.5 1220C1942.5 1252.31 1916.31 1278.5 1884 1278.5L1884 1281.5C1917.97 1281.5 1945.5 1253.97 1945.5 1220L1942.5 1220ZM2004 1118.5C1970.03 1118.5 1942.5 1146.03 1942.5 1180L1945.5 1180C1945.5 1147.69 1971.69 1121.5 2004 1121.5L2004 1118.5Z" fill="black"/>
      <path d="M1604 1120L1604 1118.5H1604L1604 1120ZM1544 1060L1545.5 1060L1545.5 1060L1544 1060ZM1545.06 958.939C1544.48 958.354 1543.53 958.354 1542.94 958.939L1533.39 968.485C1532.81 969.071 1532.81 970.021 1533.39 970.607C1533.98 971.192 1534.93 971.192 1535.51 970.607L1544 962.121L1552.49 970.607C1553.07 971.192 1554.02 971.192 1554.61 970.607C1555.19 970.021 1555.19 969.071 1554.61 968.485L1545.06 958.939ZM2024 1118.5L1604 1118.5L1604 1121.5L2024 1121.5L2024 1118.5ZM1545.5 1060L1545.5 960L1542.5 960L1542.5 1060L1545.5 1060ZM1604 1118.5C1571.69 1118.5 1545.5 1092.31 1545.5 1060L1542.5 1060C1542.5 1093.97 1570.03 1121.5 1604 1121.5L1604 1118.5Z" fill="black"/>
      <path d="M425.061 398.939C424.475 398.354 423.525 398.354 422.939 398.939L413.393 408.485C412.808 409.071 412.808 410.021 413.393 410.607C413.979 411.192 414.929 411.192 415.515 410.607L424 402.121L432.485 410.607C433.071 411.192 434.021 411.192 434.607 410.607C435.192 410.021 435.192 409.071 434.607 408.485L425.061 398.939ZM425.5 560V400H422.5V560H425.5Z" fill="black"/>
      <path d="M425.061 878.939C424.475 878.354 423.525 878.354 422.939 878.939L413.393 888.485C412.808 889.071 412.808 890.021 413.393 890.607C413.979 891.192 414.929 891.192 415.515 890.607L424 882.121L432.485 890.607C433.071 891.192 434.021 891.192 434.607 890.607C435.192 890.021 435.192 889.071 434.607 888.485L425.061 878.939ZM425.5 1040L425.5 880L422.5 880L422.5 1040L425.5 1040Z" fill="black"/>
      <path d="M1164 720.14L1164 721.64H1164L1164 720.14ZM805.941 719.079C805.355 719.665 805.355 720.615 805.941 721.201L815.487 730.746C816.073 731.332 817.023 731.332 817.608 730.746C818.194 730.161 818.194 729.211 817.608 728.625L809.123 720.14L817.608 711.655C818.194 711.069 818.194 710.119 817.608 709.533C817.023 708.947 816.073 708.947 815.487 709.533L805.941 719.079ZM1284 880L1284 878.5L1284 880ZM1224 820L1225.5 820L1225.5 820L1224 820ZM1224 780.14L1222.5 780.14L1222.5 780.14L1224 780.14ZM1164 718.64L807.002 718.64L807.002 721.64L1164 721.64L1164 718.64ZM1384 878.5L1284 878.5L1284 881.5L1384 881.5L1384 878.5ZM1225.5 820L1225.5 780.14L1222.5 780.14L1222.5 820L1225.5 820ZM1284 878.5C1251.69 878.5 1225.5 852.309 1225.5 820L1222.5 820C1222.5 853.966 1250.03 881.5 1284 881.5L1284 878.5ZM1164 721.64C1196.31 721.64 1222.5 747.831 1222.5 780.14L1225.5 780.14C1225.5 746.175 1197.97 718.64 1164 718.64L1164 721.64Z" fill="black"/>
      <path d="M902.939 1041.06C903.525 1041.65 904.475 1041.65 905.061 1041.06L914.607 1031.51C915.192 1030.93 915.192 1029.98 914.607 1029.39C914.021 1028.81 913.071 1028.81 912.485 1029.39L904 1037.88L895.515 1029.39C894.929 1028.81 893.979 1028.81 893.393 1029.39C892.808 1029.98 892.808 1030.93 893.393 1031.51L902.939 1041.06ZM484 960L484 961.5L484 960ZM844 960L844 958.5L844 960ZM902.5 1020L902.5 1040L905.5 1040L905.5 1020L902.5 1020ZM425.5 1040L425.5 1020L422.5 1020L422.5 1040L425.5 1040ZM484 961.5L844 961.5L844 958.5L484 958.5L484 961.5ZM425.5 1020C425.5 987.691 451.691 961.5 484 961.5V958.5C450.034 958.5 422.5 986.034 422.5 1020L425.5 1020ZM905.5 1020C905.5 986.034 877.966 958.5 844 958.5L844 961.5C876.309 961.5 902.5 987.691 902.5 1020L905.5 1020Z" fill="black"/>
      <path d="M425.061 1198.94C424.475 1198.35 423.525 1198.35 422.939 1198.94L413.393 1208.49C412.808 1209.07 412.808 1210.02 413.393 1210.61C413.979 1211.19 414.929 1211.19 415.515 1210.61L424 1202.12L432.485 1210.61C433.071 1211.19 434.021 1211.19 434.607 1210.61C435.192 1210.02 435.192 1209.07 434.607 1208.49L425.061 1198.94ZM902.5 1200L902.5 1220L905.5 1220L905.5 1200L902.5 1200ZM844 1278.5L484 1278.5L484 1281.5L844 1281.5L844 1278.5ZM425.5 1220L425.5 1200L422.5 1200L422.5 1220L425.5 1220ZM484 1278.5C451.691 1278.5 425.5 1252.31 425.5 1220L422.5 1220C422.5 1253.97 450.034 1281.5 484 1281.5L484 1278.5ZM902.5 1220C902.5 1252.31 876.309 1278.5 844 1278.5L844 1281.5C877.966 1281.5 905.5 1253.97 905.5 1220L902.5 1220Z" fill="black"/>
      <path d="M425.061 1198.94C424.475 1198.35 423.525 1198.35 422.939 1198.94L413.393 1208.49C412.808 1209.07 412.808 1210.02 413.393 1210.61C413.979 1211.19 414.929 1211.19 415.515 1210.61L424 1202.12L432.485 1210.61C433.071 1211.19 434.021 1211.19 434.607 1210.61C435.192 1210.02 435.192 1209.07 434.607 1208.49L425.061 1198.94ZM425.5 1360L425.5 1200L422.5 1200L422.5 1360L425.5 1360Z" fill="black"/>
      <path d="M244 1120L244 1121.5H244L244 1120ZM184 1180L185.5 1180V1180L184 1180ZM184 1380L182.5 1380V1380L184 1380ZM265.061 1441.06C265.646 1440.47 265.646 1439.53 265.061 1438.94L255.515 1429.39C254.929 1428.81 253.979 1428.81 253.393 1429.39C252.808 1429.98 252.808 1430.93 253.393 1431.51L261.879 1440L253.393 1448.49C252.808 1449.07 252.808 1450.02 253.393 1450.61C253.979 1451.19 254.929 1451.19 255.515 1450.61L265.061 1441.06ZM264 1118.5L244 1118.5L244 1121.5L264 1121.5L264 1118.5ZM182.5 1180L182.5 1380L185.5 1380L185.5 1180L182.5 1180ZM244 1441.5L264 1441.5L264 1438.5L244 1438.5L244 1441.5ZM182.5 1380C182.5 1413.97 210.034 1441.5 244 1441.5L244 1438.5C211.691 1438.5 185.5 1412.31 185.5 1380L182.5 1380ZM244 1118.5C210.034 1118.5 182.5 1146.03 182.5 1180L185.5 1180C185.5 1147.69 211.691 1121.5 244 1121.5L244 1118.5Z" fill="black"/>
      <path d="M484 1600L484 1598.5L484 1600ZM424 1540L425.5 1540L425.5 1540L424 1540ZM425.061 1518.94C424.475 1518.35 423.525 1518.35 422.94 1518.94L413.394 1528.49C412.808 1529.07 412.808 1530.02 413.394 1530.61C413.979 1531.19 414.929 1531.19 415.515 1530.61L424 1522.12L432.486 1530.61C433.071 1531.19 434.021 1531.19 434.607 1530.61C435.193 1530.02 435.193 1529.07 434.607 1528.49L425.061 1518.94ZM1384 1598.5L484 1598.5L484 1601.5L1384 1601.5L1384 1598.5ZM425.5 1540L425.5 1520L422.5 1520L422.5 1540L425.5 1540ZM484 1598.5C451.691 1598.5 425.5 1572.31 425.5 1540L422.5 1540C422.5 1573.97 450.035 1601.5 484 1601.5L484 1598.5Z" fill="black"/>
      <path d="M1284 1280L1284 1278.5L1284 1278.5L1284 1280ZM1224 1340L1222.5 1340L1222.5 1340L1224 1340ZM1224 1380L1225.5 1380L1225.5 1380L1224 1380ZM1164 1440L1164 1441.5L1164 1440ZM582.94 1438.94C582.354 1439.53 582.354 1440.47 582.94 1441.06L592.486 1450.61C593.071 1451.19 594.021 1451.19 594.607 1450.61C595.193 1450.02 595.193 1449.07 594.607 1448.49L586.122 1440L594.607 1431.51C595.193 1430.93 595.193 1429.98 594.607 1429.39C594.021 1428.81 593.071 1428.81 592.486 1429.39L582.94 1438.94ZM1384 1278.5L1284 1278.5L1284 1281.5L1384 1281.5L1384 1278.5ZM1222.5 1340L1222.5 1380L1225.5 1380L1225.5 1340L1222.5 1340ZM1164 1438.5L584 1438.5L584 1441.5L1164 1441.5L1164 1438.5ZM1222.5 1380C1222.5 1412.31 1196.31 1438.5 1164 1438.5L1164 1441.5C1197.97 1441.5 1225.5 1413.97 1225.5 1380L1222.5 1380ZM1284 1278.5C1250.03 1278.5 1222.5 1306.03 1222.5 1340L1225.5 1340C1225.5 1307.69 1251.69 1281.5 1284 1281.5L1284 1278.5Z" fill="black"/>
      <path d="M1544 540L1545.5 540V540L1544 540ZM1604 480L1604 481.5L1604 480ZM2505.06 481.061C2505.65 480.475 2505.65 479.525 2505.06 478.939L2495.51 469.393C2494.93 468.808 2493.98 468.808 2493.39 469.393C2492.81 469.979 2492.81 470.929 2493.39 471.515L2501.88 480L2493.39 488.485C2492.81 489.071 2492.81 490.021 2493.39 490.607C2493.98 491.192 2494.93 491.192 2495.51 490.607L2505.06 481.061ZM1545.5 800L1545.5 540L1542.5 540L1542.5 800L1545.5 800ZM1604 481.5L2504 481.5L2504 478.5L1604 478.5L1604 481.5ZM1545.5 540C1545.5 507.691 1571.69 481.5 1604 481.5L1604 478.5C1570.03 478.5 1542.5 506.034 1542.5 540L1545.5 540Z" fill="black"/>
      <path d="M1544 700L1545.5 700L1544 700ZM1604 640L1604 638.5L1604 640ZM2025.06 641.061C2025.65 640.475 2025.65 639.525 2025.06 638.939L2015.51 629.393C2014.93 628.808 2013.98 628.808 2013.39 629.393C2012.81 629.979 2012.81 630.929 2013.39 631.515L2021.88 640L2013.39 648.485C2012.81 649.071 2012.81 650.021 2013.39 650.607C2013.98 651.192 2014.93 651.192 2015.51 650.607L2025.06 641.061ZM1545.5 800L1545.5 700L1542.5 700L1542.5 800L1545.5 800ZM1604 641.5L2024 641.5L2024 638.5L1604 638.5L1604 641.5ZM1545.5 700C1545.5 667.691 1571.69 641.5 1604 641.5L1604 638.5C1570.03 638.5 1542.5 666.034 1542.5 700L1545.5 700Z" fill="black"/>
      <path d="M1944 1060L1945.5 1060L1944 1060ZM1944 701L1942.5 701V701L1944 701ZM2025.06 642.061C2025.65 641.475 2025.65 640.525 2025.06 639.939L2015.51 630.393C2014.93 629.808 2013.98 629.808 2013.39 630.393C2012.81 630.979 2012.81 631.929 2013.39 632.515L2021.88 641L2013.39 649.485C2012.81 650.071 2012.81 651.021 2013.39 651.607C2013.98 652.192 2014.93 652.192 2015.51 651.607L2025.06 642.061ZM2024 1118.5L2004 1118.5L2004 1121.5L2024 1121.5L2024 1118.5ZM1945.5 1060L1945.5 701L1942.5 701L1942.5 1060L1945.5 1060ZM2004 642.5L2024 642.5L2024 639.5L2004 639.5L2004 642.5ZM1945.5 701C1945.5 668.691 1971.69 642.5 2004 642.5L2004 639.5C1970.03 639.5 1942.5 667.034 1942.5 701L1945.5 701ZM2004 1118.5C1971.69 1118.5 1945.5 1092.31 1945.5 1060L1942.5 1060C1942.5 1093.97 1970.03 1121.5 2004 1121.5L2004 1118.5Z" fill="black"/>
    </g>
    <defs>
      <clipPath id="clip0">
        <rect width="3520" height="1760" fill="white"/>
      </clipPath>
      <clipPath id="clip1">
        <rect width="320" height="160" fill="white"/>
      </clipPath>
    </defs>
  </svg>
</div>
